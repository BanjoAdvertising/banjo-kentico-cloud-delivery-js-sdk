# Delivery SDK for Javascript

Unofficial SDK for the Kentico Cloud Delivery API.
Not production ready yet!

## About

The idea behind this SDK is to:

-   Get complete content for current view from the Kentico Cloud storage easily.
-   Simplify content in the response to be able to operate and render the content easily.

All of this happens in a single Promise chain in 3 steps:

1.  Get complete content by calling the `getContent` method that is able to make multiple requests and return a single response.
2.  Name data items for each request with use of the `categorizeContent` method so you can operate with the content easily.
3.  Simplify the content by getting only values from the complex response with use of the `getValues` method.

## Installation

```sh
npm install kentico-cloud-delivery-js-sdk
```

## Start

```javascript
var Delivery = require('kentico-cloud-delivery-js-sdk');

var project = new Delivery(your_project_id, your_project_preview_API_key);

project.getContent(array_of_endpoint_parameters, flag_whether_you_need_preview_items) // Step 1
.then(function (data) {
  return project.categorizeContent(data, array_of_category_names); // Step 2
}).then(function (data) {
  return project.getValues(data, object_containing_config_of_simplified_content); // Step 3
}).then(console.log); // See result
```

Some method parameters need explanation:
-   [your_project_id](#your_project_id)
-   [your_project_preview_API_key](#your_project_preview_API_key)
-   [array_of_endpoint_parameters](#array_of_endpoint_parameters)
-   [flag_whether_you_need_preview_items](#flag_whether_you_need_preview_items)
-   [object_containing_config_of_simplified_content](#object_containing_config_of_simplified_content)

### <a name="your_project_id"></a>your_project_id

### <a name="your_project_preview_API_key"></a>your_project_preview_API_key

### <a name="array_of_endpoint_parameters"></a>array_of_endpoint_parameters

### <a name="flag_whether_you_need_preview_items"></a>flag_whether_you_need_preview_items

### <a name="object_containing_config_of_simplified_content"></a>object_containing_config_of_simplified_content

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Delivery

Initilizes object with its Project ID and Preview API Key that represents a Kentico Cloud project.

**Parameters**

-   `projectID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Project ID, see details in the Kentico Cloud Developers Hub: <https://developer.kenticocloud.com/docs/using-delivery-api#section-getting-project-id>.
-   `previewKey` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Preview API Key, see details in the Kentico Cloud Developers Hub: <https://developer.kenticocloud.com/docs/preview-content-via-api>.

**Examples**

```javascript
var project = new Delivery('82594550-e25c-8219-aee9-677f600bad53', 'ew0KICAiYWxnIjo...QvV8puicXQ');
```

### getContent

Returns promise with data specified by array of params.

**Parameters**

-   `params` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Filtering url parameters that are used for requesting Kentico Cloud storage. See deatils about filtering url parameters: <https://developer.kenticocloud.com/v1/reference#delivery-api>
-   `isPreview` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Flag that controls whether only published or all items should be requested.

**Examples**

```javascript
// returns [{items: [...]}, {items: [...]}]
project.getContent(['?system.type=navigation', '?system.type=homepage'], false)
```

Returns **[promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Returns promise with array of responses for each passed parameter from the Kentico Cloud storage.

### categorizeContent

Returns object where each content item is assigned to one category according to their position in given arrays. Number of content items and categories must match.

**Parameters**

-   `content` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Content items returned from the "getContent" method.
-   `categories` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Names of categories.

**Examples**

```javascript
// returns {navigation: {items: [...]}, homepage: {items: [...]}}
project.getContent(['?system.type=navigation', '?system.type=homepage'], false)
.then(function (data) {
  return project.categorizeContent(data, ['navigation', 'homepage']);
})
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Returns object where content items are property values and categories are property names oreder by their position in given arrays.

### getValues

Returns values from content items according to given config object.
Covers content types: Text, Rich text, Number, Multiple choice, Date & time, Asset, Modular content, URL slug, Taxonomy and supports localization.

**Parameters**

-   `content` **[array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** Categorized content items returned from the "categorizeContent" method.
-   `config` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Model that descibes values you need to get from the data provided through content parameter.

**Examples**

```javascript
// Returns
// {
//   homepage: {
//     items: [{
//       system: {
//         id: '...',
//         name: '...'
//       },
//       elements: {
//         page_title: '...',
//         header: '...',
//         logos: [{
//           system: {
//             codename: '...'
//           },
//           elements: {
//             image: ['...'],
//             url: '...'
//           }
//         }]
//       }
//     }
//   }],
//   blog: {
//     items: [{
//       system: {
//         id: '...',
//         name: '...'
//       },
//       elements: {
//         page_title: '...',
//         publish_date: '...',
//         header_image: ['...', '...']
//       }
//     },{
//       system: {
//         id: '...',
//         name: '...'
//       },
//       elements: {
//         page_title: '...',
//         publish_date: '...',
//         header_image: ['...', '...']
//       }
//    }],
//    pagination: {
//      skip: ...,
//      limit: ...,
//      count: ...,
//      next_page: '...'
//    }
// }
project.getContent(['?system.type=home', '?system.type=blog_post'], false)
.then(function (data) {
  return project.categorizeContent(data, ['hompage', 'blog']);
}).then(function (data) {
  return project.getValues(data, {
    homepage: {
      system: ['id', 'name'],
      elements: ['page_title', 'header', {
        name: 'logos',
        system: ['codename'],
        elements: ['image', 'url']
      }]
    },
    blog: {
      system: ['id', 'name'],
      elements: ['page_title', 'publish_date', 'header_image'],
      pagination: true
    }
  });
);
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Returns content items values that are structured according to the config parameter.
